#include <iostream>
#include <vector>

int repeatedNumber(const std::vector<int>& numbers) 
{
    int cnt1 = 0;
    int cnt2 = 0;
    int num1 = INT_MAX;
    int num2 = INT_MAX;

    for(const auto& n : numbers) {
        if(n == num1) 
            ++cnt1;
        else if(n == num2)
            ++cnt2;
        else if(cnt1 == 0) {
            num1 = n;
            cnt1 = 1;
        } else if(cnt2 == 0) {
            num2 = n;
            cnt2 = 1;
        } else {
            --cnt1;
            --cnt2;
        }
    }
    cnt1 = 0;
    cnt2 = 0;
    for(const auto& i : numbers) {
        if(i == num1)
            ++cnt1;
        else if(i == num2)
            ++cnt2;
    }
    if(cnt1 > numbers.size()/3) return num1;
    else if(cnt2 > numbers.size()/3) return num2;
    else return -1; 
}

int main() 
{
    std::vector<int> numbers {1000039, 1000487, 1000840, 1000840, 1000665, 1000778, 1000840, 1000840, 1000840, 1000342, 1000493, 1000125, 1000758, 1000108, 1000726, 1000291, 1000840, 1000840, 1000192, 1000840, 1000840, 1000840, 1000048, 1000131, 1000269, 1000337, 1000797, 1000335, 1000930, 1000840, 1000697, 1000753, 1000329, 1000950, 1000840, 1000069, 1000068, 1000257, 1000842, 1000840, 1000372, 1000092, 1000568, 1000837, 1000862, 1000840, 1000840, 1000840, 1000840, 1000385, 1000411, 1000366, 1000840, 1000451, 1000667, 1000779, 1000853, 1000825, 1000840, 1000840, 1000451, 1000840, 1000840, 1000731, 1000313, 1000306, 1000871, 1000840, 1000840, 1000840, 1000804, 1000510, 1000661, 1000437, 1000840, 1000403, 1000841, 1000840, 1000840, 1000314, 1000863, 1000840, 1000840, 1000119, 1000705, 1000054, 1000840, 1000840, 1000412, 1000840, 1000840, 1000776, 1000840, 1000171, 1000840, 1000840, 1000447, 1000840, 1000840, 1000941, 1000108, 1000978, 1000920, 1000810, 1000413, 1000838, 1000707, 1000840, 1000840, 1000798, 1000710, 1000840, 1000571, 1000334, 1000359, 1000517, 1000928, 1000061, 1000007, 1000840, 1000840, 1000329, 1000840, 1000576, 1000840, 1000547, 1000170, 1000022, 1000840, 1000596, 1000828, 1000840, 1000840, 1000982, 1000869, 1000891, 1000464, 1000840, 1000998, 1000265, 1000402, 1000539, 1000047, 1000339, 1000770, 1000527, 1000586, 1000175, 1000852, 1000840, 1000351, 1000516, 1000416, 1000250, 1000330, 1000042, 1000983, 1000016, 1000840, 1000981, 1000684, 1000430, 1000840, 1000933, 1000840, 1000840, 1000990, 1000840, 1000486, 1000840, 1000176, 1000840, 1000840, 1000840, 1000840, 1000156, 1000829, 1000571, 1000840, 1000017, 1000604, 1000797, 1000777, 1000933, 1000000, 1000719, 1000991, 1000745, 1000069, 1000892, 1000840, 1000840, 1000894, 1000200, 1000816, 1000840, 1000840};
    int repeated = repeatedNumber(numbers);
    std::cout << "repeated = " << repeated << '\n';
    return 0;
}
